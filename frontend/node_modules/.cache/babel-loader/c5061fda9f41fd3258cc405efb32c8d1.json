{"ast":null,"code":"import _defineProperty from \"/root/Desktop/bits-his/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/root/Desktop/bits-his/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/root/Desktop/bits-his/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/root/Desktop/bits-his/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/root/Desktop/bits-his/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/root/Desktop/bits-his/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/root/Desktop/bits-his/frontend/src/components/Doctor Module/EditPrescriptionRequest.js\";\nimport React, { Component } from 'react';\nimport { Form, FormGroup } from 'reactstrap';\nimport DrugsTable from './DrugsTable';\nimport { _warningNotify, _fetchData } from '../helpers';\nimport Notifications from 'react-notify-toast';\nimport { Link } from 'react-router-dom';\nimport { FaArrowRight, FaArrowLeft } from 'react-icons/fa';\n\nvar EditPrescriptionRequest =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(EditPrescriptionRequest, _Component);\n\n  function EditPrescriptionRequest(props) {\n    var _this;\n\n    _classCallCheck(this, EditPrescriptionRequest);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditPrescriptionRequest).call(this, props));\n\n    _this.onInputChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.clearText = function () {\n      _this.setState({\n        drug: '',\n        dosage: '',\n        duration: '',\n        period: 0,\n        frequency: '',\n        price: ''\n      });\n    };\n\n    _this.fetchDrugs = function () {\n      var route = 'drugs/allDrugs';\n\n      var success_callback = function success_callback(drugs) {\n        return _this.setState({\n          drugs: drugs\n        });\n      };\n\n      _fetchData({\n        route: route,\n        success_callback: success_callback\n      });\n    };\n\n    _this.onInputBlurCapture = function (_ref) {\n      var target = _ref.target;\n\n      _this.fetchDrugPrice(target.value);\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var _this$state = _this.state,\n          drug = _this$state.drug,\n          dosage = _this$state.dosage,\n          duration = _this$state.duration,\n          period = _this$state.period,\n          frequency = _this$state.frequency,\n          price = _this$state.price;\n\n      if (drug === '' || dosage === '' || duration === '' || period === 0 || frequency === '') {\n        return _warningNotify('Please fill all the textboxes');\n      }\n\n      var formData = {\n        drug: drug,\n        dosage: dosage,\n        duration: duration,\n        period: period,\n        frequency: frequency,\n        price: price\n      };\n      var drugsList = _this.state.drugsList;\n      var newList = drugsList.concat(formData);\n\n      _this.setState({\n        drugsList: newList\n      });\n\n      _this.clearText();\n    };\n\n    _this.removeDrug = function (drug) {\n      var drugsList = _this.state.drugsList;\n      var newList = drugsList.filter(function (d) {\n        return d.drug !== drug;\n      });\n\n      _this.setState({\n        drugsList: newList\n      });\n    };\n\n    _this.handleUpdate = function (e) {\n      e.preventDefault();\n      var drugsList = _this.state.drugsList;\n\n      _this.props.updateTable(drugsList);\n\n      _this.toggle();\n\n      _this.setState({\n        drugsList: []\n      });\n    };\n\n    _this.handleNext = function (e) {\n      var drugsList = _this.state.drugsList;\n      if (drugsList === []) return;\n      return localStorage.setItem('prescription_request', JSON.stringify(drugsList));\n    };\n\n    _this.onPeriodChange = function (e) {\n      _this.setState({\n        period: e.target.value\n      });\n    };\n\n    _this.onDurationChange = function (e) {\n      _this.setState({\n        duration: e.target.value\n      });\n    };\n\n    var cached = JSON.parse(localStorage.getItem('prescription_request')) || [];\n    _this.state = {\n      drugs: '',\n      drug: '',\n      dosage: '',\n      duration: '',\n      period: 0,\n      frequency: '',\n      drugsList: cached || []\n    };\n    return _this;\n  }\n\n  _createClass(EditPrescriptionRequest, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchDrugs();\n    }\n  }, {\n    key: \"fetchDrugPrice\",\n    value: function fetchDrugPrice(drug) {\n      var _this2 = this;\n\n      var route = \"drugs/getPriceByDrugname?drug=\".concat(drug); // let result;\n\n      var success_callback = function success_callback(data) {\n        return _this2.setState({\n          price: data[0].price\n        });\n      };\n\n      var error_callback = function error_callback(err) {\n        return console.log(err);\n      };\n\n      _fetchData({\n        route: route,\n        success_callback: success_callback,\n        error_callback: error_callback\n      }); // return result;\n\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var dropdownItems = [];\n\n      for (var i = 0; i <= 10; i++) {\n        dropdownItems.push(React.createElement(\"option\", {\n          value: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 119\n          },\n          __self: this\n        }, i));\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Prescription Request\")), React.createElement(\"hr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col-md-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"Select Drugs:\"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"drug\",\n        value: this.state.drug,\n        className: \"form-control col-md-4\",\n        onChange: this.onInputChange,\n        onBlurCapture: this.onInputBlurCapture,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        className: \"col-md-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"Dosage:\"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"dosage\",\n        value: this.state.dosage,\n        className: \"form-control col-md-4\",\n        onChange: this.onInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      })), React.createElement(Notifications, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }), React.createElement(FormGroup, {\n        row: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"col-md-7 row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        className: \"col-md-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"Duration: \"), React.createElement(\"select\", {\n        className: \"col-md-2 form-control\",\n        onChange: this.onDurationChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, dropdownItems), React.createElement(\"label\", {\n        className: \"col-md-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Period: \"), React.createElement(\"div\", {\n        className: \"col-md-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"period\",\n        value: \"hour\",\n        onChange: this.onPeriodChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }), \"Hour\", React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"period\",\n        value: \"day\",\n        onChange: this.onPeriodChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }), \"Day\", React.createElement(\"input\", {\n        type: \"radio\",\n        name: \"period\",\n        value: \"week\",\n        onChange: this.onPeriodChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }), \"Week\")), React.createElement(\"label\", {\n        className: \"col-md-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"Frequency:\"), React.createElement(\"input\", {\n        type: \"text\",\n        name: \"frequency\",\n        value: this.state.frequency,\n        className: \"form-control col-md-3\",\n        onChange: this.onInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      })), React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-outline-primary offset-md-5\",\n        title: \"add to list\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Add Prescription\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, React.createElement(DrugsTable, {\n        drugsList: this.state.drugsList,\n        onRemove: this.removeDrug,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: this.handleNext,\n        className: \"btn btn-outline-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/patient_clarking/dressing_request\",\n        style: {\n          width: '9vw',\n          color: 'blue'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(FaArrowLeft, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }), \" Prev\")), React.createElement(\"button\", {\n        onClick: this.handleNext,\n        className: \"btn btn-outline-primary offset-md-7\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213\n        },\n        __self: this\n      }, React.createElement(Link, {\n        to: \"/patient_clarking/radiological_investigation\",\n        style: {\n          width: '9vw',\n          color: 'blue'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216\n        },\n        __self: this\n      }, \"Next \", React.createElement(FaArrowRight, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return EditPrescriptionRequest;\n}(Component);\n\nexport { EditPrescriptionRequest as default };","map":{"version":3,"sources":["/root/Desktop/bits-his/frontend/src/components/Doctor Module/EditPrescriptionRequest.js"],"names":["React","Component","Form","FormGroup","DrugsTable","_warningNotify","_fetchData","Notifications","Link","FaArrowRight","FaArrowLeft","EditPrescriptionRequest","props","onInputChange","e","setState","target","name","value","clearText","drug","dosage","duration","period","frequency","price","fetchDrugs","route","success_callback","drugs","onInputBlurCapture","fetchDrugPrice","handleSubmit","preventDefault","state","formData","drugsList","newList","concat","removeDrug","filter","d","handleUpdate","updateTable","toggle","handleNext","localStorage","setItem","JSON","stringify","onPeriodChange","onDurationChange","cached","parse","getItem","data","error_callback","err","console","log","dropdownItems","i","push","width","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Form, FormGroup } from 'reactstrap';\nimport DrugsTable from './DrugsTable';\nimport { _warningNotify, _fetchData } from '../helpers';\nimport Notifications from 'react-notify-toast';\nimport { Link } from 'react-router-dom';\nimport { FaArrowRight, FaArrowLeft } from 'react-icons/fa';\n\nexport default class EditPrescriptionRequest extends Component {\n  constructor(props) {\n    super(props);\n\n    let cached = JSON.parse(localStorage.getItem('prescription_request')) || [];\n\n    this.state = {\n      drugs: '',\n      drug: '',\n      dosage: '',\n      duration: '',\n      period: 0,\n      frequency: '',\n      drugsList: cached || [],\n    };\n  }\n\n  onInputChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  clearText = () => {\n    this.setState({\n      drug: '',\n      dosage: '',\n      duration: '',\n      period: 0,\n      frequency: '',\n      price: '',\n    });\n  };\n\n  componentDidMount() {\n    this.fetchDrugs();\n  }\n\n  fetchDrugs = () => {\n    let route = 'drugs/allDrugs';\n    let success_callback = drugs => this.setState({ drugs });\n    _fetchData({ route, success_callback });\n  };\n\n  onInputBlurCapture = ({ target }) => {\n    this.fetchDrugPrice(target.value);\n  };\n\n  fetchDrugPrice(drug) {\n    let route = `drugs/getPriceByDrugname?drug=${drug}`;\n    // let result;\n    let success_callback = data => this.setState({ price: data[0].price });\n    let error_callback = err => console.log(err);\n    _fetchData({ route, success_callback, error_callback });\n    // return result;\n  }\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const { drug, dosage, duration, period, frequency, price } = this.state;\n    if (\n      drug === '' ||\n      dosage === '' ||\n      duration === '' ||\n      period === 0 ||\n      frequency === ''\n    ) {\n      return _warningNotify('Please fill all the textboxes');\n    }\n\n    const formData = { drug, dosage, duration, period, frequency, price };\n\n    let drugsList = this.state.drugsList;\n    let newList = drugsList.concat(formData);\n    this.setState({ drugsList: newList });\n    this.clearText();\n  };\n\n  removeDrug = drug => {\n    const { drugsList } = this.state;\n    let newList = drugsList.filter(d => d.drug !== drug);\n    this.setState({ drugsList: newList });\n  };\n\n  handleUpdate = e => {\n    e.preventDefault();\n    const { drugsList } = this.state;\n    this.props.updateTable(drugsList);\n    this.toggle();\n    this.setState({ drugsList: [] });\n  };\n\n  handleNext = e => {\n    const { drugsList } = this.state;\n    if (drugsList === []) return;\n    return localStorage.setItem(\n      'prescription_request',\n      JSON.stringify(drugsList)\n    );\n  };\n\n  onPeriodChange = e => {\n    this.setState({ period: e.target.value });\n  };\n\n  onDurationChange = e => {\n    this.setState({ duration: e.target.value });\n  };\n\n  render() {\n    const dropdownItems = [];\n    for (let i = 0; i <= 10; i++) {\n      dropdownItems.push(<option value={i}>{i}</option>);\n    }\n    return (\n      <div>\n        <h3 className=\"text-center\">\n          <strong>Prescription Request</strong>\n        </h3>\n        <hr />\n        <Form onSubmit={this.handleSubmit}>\n          <FormGroup row>\n            <label className=\"col-md-2\">Select Drugs:</label>\n            <input\n              type=\"text\"\n              name=\"drug\"\n              value={this.state.drug}\n              className=\"form-control col-md-4\"\n              onChange={this.onInputChange}\n              onBlurCapture={this.onInputBlurCapture}\n            />\n            <label className=\"col-md-2\">Dosage:</label>\n            <input\n              type=\"text\"\n              name=\"dosage\"\n              value={this.state.dosage}\n              className=\"form-control col-md-4\"\n              onChange={this.onInputChange}\n            />\n          </FormGroup>\n          <Notifications />\n          <FormGroup row>\n            <br />\n            <div className=\"col-md-7 row\">\n              <label className=\"col-md-3\">Duration: </label>\n              <select\n                className=\"col-md-2 form-control\"\n                onChange={this.onDurationChange}>\n                {dropdownItems}\n              </select>\n              <label className=\"col-md-2\">Period: </label>\n              <div className=\"col-md-5\">\n                <input\n                  type=\"radio\"\n                  name=\"period\"\n                  value=\"hour\"\n                  onChange={this.onPeriodChange}\n                />\n                Hour\n                <input\n                  type=\"radio\"\n                  name=\"period\"\n                  value=\"day\"\n                  onChange={this.onPeriodChange}\n                />\n                Day\n                <input\n                  type=\"radio\"\n                  name=\"period\"\n                  value=\"week\"\n                  onChange={this.onPeriodChange}\n                />\n                Week\n              </div>\n            </div>\n            <label className=\"col-md-2\">Frequency:</label>\n            <input\n              type=\"text\"\n              name=\"frequency\"\n              value={this.state.frequency}\n              className=\"form-control col-md-3\"\n              onChange={this.onInputChange}\n            />\n          </FormGroup>\n          <button\n            type=\"submit\"\n            className=\"btn btn-outline-primary offset-md-5\"\n            title=\"add to list\">\n            Add Prescription\n          </button>\n        </Form>\n        <br />\n        <div className=\"\">\n          <DrugsTable\n            drugsList={this.state.drugsList}\n            onRemove={this.removeDrug}\n          />\n        </div>\n        <div className=\"row\">\n          <button onClick={this.handleNext} className=\"btn btn-outline-primary\">\n            <Link\n              to=\"/patient_clarking/dressing_request\"\n              style={{ width: '9vw', color: 'blue' }}>\n              <FaArrowLeft /> Prev\n            </Link>\n          </button>\n          <button\n            onClick={this.handleNext}\n            className=\"btn btn-outline-primary offset-md-7\">\n            <Link\n              to=\"/patient_clarking/radiological_investigation\"\n              style={{ width: '9vw', color: 'blue' }}>\n              Next <FaArrowRight />\n            </Link>\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}