{"ast":null,"code":"import _defineProperty from \"/root/Desktop/bits-his/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/root/Desktop/bits-his/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/root/Desktop/bits-his/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/root/Desktop/bits-his/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/root/Desktop/bits-his/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/root/Desktop/bits-his/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/root/Desktop/bits-his/src/components/AdminModule/CreateUserForm.js\";\nimport React, { Component } from \"react\";\nimport { Card, CardBody, CardHeader } from \"reactstrap\";\nimport { _fetchData, _postData } from \"../helpers.js\";\n\nvar CreateUserForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CreateUserForm, _Component);\n\n  function CreateUserForm(props) {\n    var _this;\n\n    _classCallCheck(this, CreateUserForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CreateUserForm).call(this, props));\n\n    _this.fetchUsers = function () {\n      var cb = function cb(data) {\n        return _this.setState({\n          users: data\n        });\n      };\n\n      _fetchData({\n        route: \"users/usersList\",\n        callback: cb\n      });\n    };\n\n    _this.logChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.onRecordsCheckBoxChange = function () {\n      _this.setState(function (prevState) {\n        return {\n          records: prevState.records === 0 ? 1 : 0\n        };\n      });\n    };\n\n    _this.onDoctorsCheckBoxChange = function () {\n      _this.setState(function (prevState) {\n        return {\n          doctors: prevState.doctors === 0 ? 1 : 0\n        };\n      });\n    };\n\n    _this.onpharmacyCheckBoxChange = function () {\n      _this.setState(function (prevState) {\n        return {\n          pharmacy: prevState.pharmacy === 0 ? 1 : 0\n        };\n      });\n    };\n\n    _this.onAdminCheckBoxChange = function () {\n      _this.setState(function (prevState) {\n        return {\n          admin: prevState.admin === 0 ? 1 : 0\n        };\n      });\n    };\n\n    _this.onRoleChange = function (e) {\n      _this.setState({\n        role: e.target.value\n      });\n    };\n\n    _this.onSpecialityChange = function (e) {\n      _this.setState({\n        speciality: e.target.value\n      });\n    };\n\n    _this.submit = function (data) {\n      // postData({ route: 'users/new', data });\n      fetch(\"http://localhost:4000/users/new\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(data)\n      }).then(function (response) {\n        if (response.status >= 400) {\n          throw new Error(\"Bad response from server\");\n        }\n\n        return response.json();\n      }).then(function (data) {\n        console.log(data);\n\n        if (data === \"success\") {\n          this.setState({\n            msg: \"Thanks for registering\"\n          });\n        }\n      }).catch(function (err) {\n        return err;\n      });\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var username = _this.state.username;\n      var users = _this.state.users;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = users[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var user = _step.value;\n\n          if (user.username === username) {\n            return _this.setState({\n              msg: \"Username taken! please choose another username\"\n            });\n          } else {\n            var data = {\n              name: _this.state.name,\n              username: username,\n              password: _this.state.password,\n              role: _this.state.role,\n              speciality: _this.state.speciality,\n              records: _this.state.records,\n              doctors: _this.state.doctors,\n              pharmacy: _this.state.pharmacy,\n              admin: _this.state.admin\n            };\n\n            _this.submit(data);\n\n            _this.setState({\n              name: \"\",\n              username: \"\",\n              password: \"\",\n              role: \"\",\n              speciality: \"\",\n              records: 0,\n              doctors: 0,\n              pharmacy: 0,\n              admin: 0,\n              msg: \"\"\n            });\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    };\n\n    _this.state = {\n      users: [],\n      name: \"\",\n      username: \"\",\n      password: \"\",\n      role: \"\",\n      speciality: \"\",\n      records: 0,\n      doctors: 0,\n      pharmacy: 0,\n      admin: 0,\n      msg: \"\"\n    };\n    return _this;\n  }\n\n  _createClass(CreateUserForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchUsers();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _React$createElement, _React$createElement2, _React$createElement3, _React$createElement4;\n\n      var formStyle = {\n        width: \"100%\",\n        marginLeft: 10,\n        marginRight: 10\n      };\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        style: formStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"Create a new User\")), React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Full Name:\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: this.state.name,\n        onChange: this.logChange,\n        name: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Username:\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: this.state.username,\n        onChange: this.logChange,\n        name: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, \"Password:\"), React.createElement(\"input\", {\n        type: \"password\",\n        className: \"form-control\",\n        value: this.state.password,\n        onChange: this.logChange,\n        name: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }, \"Role:\"), React.createElement(\"select\", {\n        className: \"form-control\",\n        value: this.state.role,\n        onChange: this.onRoleChange,\n        name: \"role\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, \"Select\"), React.createElement(\"option\", {\n        value: \"doctor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, \"Doctor\"), React.createElement(\"option\", {\n        value: \"nurse\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186\n        },\n        __self: this\n      }, \"Nurse\"), React.createElement(\"option\", {\n        value: \"phamarcist\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, \"Phamarcist\"), React.createElement(\"option\", {\n        value: \"accountant\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }, \"Accountant\"))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192\n        },\n        __self: this\n      }, \"Speciality\"), React.createElement(\"select\", {\n        className: \"form-control\",\n        value: this.state.speciality,\n        onChange: this.onSpecialityChange,\n        name: \"speciality\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      }, \"Select\"), React.createElement(\"option\", {\n        value: \"ent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, \"ENT\"), React.createElement(\"option\", {\n        value: \"gynea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, \"Gynea\"), React.createElement(\"option\", {\n        value: \"emergency\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }, \"Emergency\"), React.createElement(\"option\", {\n        value: \"recordKeeping\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }, \"Record Keeping\"), React.createElement(\"option\", {\n        value: \"accounting\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204\n        },\n        __self: this\n      }, \"Accounting\"))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"Modules Visible to the User:\"), React.createElement(\"div\", {\n        className: \"checkboxes-stack\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(\"input\", (_React$createElement = {\n        type: \"checkbox\",\n        name: \"records\",\n        value: this.state.records\n      }, _defineProperty(_React$createElement, \"name\", \"records\"), _defineProperty(_React$createElement, \"onChange\", this.onRecordsCheckBoxChange), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement)), \" \", \"Records Module\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(\"input\", (_React$createElement2 = {\n        type: \"checkbox\",\n        name: \"doctors\",\n        value: this.state.doctors\n      }, _defineProperty(_React$createElement2, \"name\", \"doctors\"), _defineProperty(_React$createElement2, \"onChange\", this.onDoctorsCheckBoxChange), _defineProperty(_React$createElement2, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      }), _defineProperty(_React$createElement2, \"__self\", this), _React$createElement2)), \" \", \"Doctors Module\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"input\", (_React$createElement3 = {\n        type: \"checkbox\",\n        name: \"pharmacy\",\n        value: this.state.pharmacy\n      }, _defineProperty(_React$createElement3, \"name\", \"pharmacy\"), _defineProperty(_React$createElement3, \"onChange\", this.onpharmacyCheckBoxChange), _defineProperty(_React$createElement3, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      }), _defineProperty(_React$createElement3, \"__self\", this), _React$createElement3)), \" \", \"Pharmacy Module\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 240\n        },\n        __self: this\n      }, React.createElement(\"input\", (_React$createElement4 = {\n        type: \"checkbox\",\n        name: \"admin\",\n        value: this.state.admin\n      }, _defineProperty(_React$createElement4, \"name\", \"admin\"), _defineProperty(_React$createElement4, \"onChange\", this.onAdminCheckBoxChange), _defineProperty(_React$createElement4, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      }), _defineProperty(_React$createElement4, \"__self\", this), _React$createElement4)), \" \", \"Admin Module\"))), React.createElement(\"span\", {\n        style: {\n          color: \"red\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252\n        },\n        __self: this\n      }, this.state.msg), React.createElement(\"input\", {\n        type: \"submit\",\n        onClick: this.handleSubmit,\n        value: \"Sumit\",\n        className: \"btn btn-outline-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return CreateUserForm;\n}(Component);\n\nexport { CreateUserForm as default };","map":{"version":3,"sources":["/root/Desktop/bits-his/src/components/AdminModule/CreateUserForm.js"],"names":["React","Component","Card","CardBody","CardHeader","_fetchData","_postData","CreateUserForm","props","fetchUsers","cb","data","setState","users","route","callback","logChange","e","target","name","value","onRecordsCheckBoxChange","prevState","records","onDoctorsCheckBoxChange","doctors","onpharmacyCheckBoxChange","pharmacy","onAdminCheckBoxChange","admin","onRoleChange","role","onSpecialityChange","speciality","submit","fetch","method","headers","body","JSON","stringify","then","response","status","Error","json","console","log","msg","catch","err","handleSubmit","preventDefault","username","state","user","password","formStyle","width","marginLeft","marginRight","color"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Card, CardBody, CardHeader } from \"reactstrap\";\nimport { _fetchData, _postData } from \"../helpers.js\";\n\nexport default class CreateUserForm extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      users: [],\n      name: \"\",\n      username: \"\",\n      password: \"\",\n      role: \"\",\n      speciality: \"\",\n      records: 0,\n      doctors: 0,\n      pharmacy: 0,\n      admin: 0,\n      msg: \"\"\n    };\n  }\n\n  componentDidMount() {\n    this.fetchUsers();\n  }\n\n  fetchUsers = () => {\n    const cb = data => this.setState({ users: data });\n    _fetchData({ route: \"users/usersList\", callback: cb });\n  };\n\n  logChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  onRecordsCheckBoxChange = () => {\n    this.setState(prevState => {\n      return { records: prevState.records === 0 ? 1 : 0 };\n    });\n  };\n\n  onDoctorsCheckBoxChange = () => {\n    this.setState(prevState => {\n      return { doctors: prevState.doctors === 0 ? 1 : 0 };\n    });\n  };\n\n  onpharmacyCheckBoxChange = () => {\n    this.setState(prevState => {\n      return { pharmacy: prevState.pharmacy === 0 ? 1 : 0 };\n    });\n  };\n\n  onAdminCheckBoxChange = () => {\n    this.setState(prevState => {\n      return { admin: prevState.admin === 0 ? 1 : 0 };\n    });\n  };\n\n  onRoleChange = e => {\n    this.setState({ role: e.target.value });\n  };\n\n  onSpecialityChange = e => {\n    this.setState({ speciality: e.target.value });\n  };\n\n  submit = data => {\n    // postData({ route: 'users/new', data });\n\n    fetch(\"http://localhost:4000/users/new\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(data)\n    })\n      .then(function(response) {\n        if (response.status >= 400) {\n          throw new Error(\"Bad response from server\");\n        }\n        return response.json();\n      })\n      .then(function(data) {\n        console.log(data);\n        if (data === \"success\") {\n          this.setState({ msg: \"Thanks for registering\" });\n        }\n      })\n      .catch(function(err) {\n        return err;\n      });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const username = this.state.username;\n    const users = this.state.users;\n\n    for (let user of users) {\n      if (user.username === username) {\n        return this.setState({\n          msg: \"Username taken! please choose another username\"\n        });\n      } else {\n        const data = {\n          name: this.state.name,\n          username,\n          password: this.state.password,\n          role: this.state.role,\n          speciality: this.state.speciality,\n          records: this.state.records,\n          doctors: this.state.doctors,\n          pharmacy: this.state.pharmacy,\n          admin: this.state.admin\n        };\n        this.submit(data);\n        this.setState({\n          name: \"\",\n          username: \"\",\n          password: \"\",\n          role: \"\",\n          speciality: \"\",\n          records: 0,\n          doctors: 0,\n          pharmacy: 0,\n          admin: 0,\n          msg: \"\"\n        });\n      }\n    }\n  };\n\n  render() {\n    const formStyle = {\n      width: \"100%\",\n      marginLeft: 10,\n      marginRight: 10\n    };\n    return (\n      <div>\n        <form style={formStyle}>\n          <Card>\n            <CardHeader>\n              <h4>Create a new User</h4>\n            </CardHeader>\n            <CardBody>\n              <div>\n                <label>Full Name:</label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  value={this.state.name}\n                  onChange={this.logChange}\n                  name=\"name\"\n                />\n              </div>\n              <div>\n                <label>Username:</label>\n                <input\n                  type=\"text\"\n                  className=\"form-control\"\n                  value={this.state.username}\n                  onChange={this.logChange}\n                  name=\"username\"\n                />\n              </div>\n              <div>\n                <label>Password:</label>\n                <input\n                  type=\"password\"\n                  className=\"form-control\"\n                  value={this.state.password}\n                  onChange={this.logChange}\n                  name=\"password\"\n                />\n              </div>\n              <div>\n                <label>Role:</label>\n                <select\n                  className=\"form-control\"\n                  value={this.state.role}\n                  onChange={this.onRoleChange}\n                  name=\"role\"\n                >\n                  <option value=\"\">Select</option>\n                  <option value=\"doctor\">Doctor</option>\n                  <option value=\"nurse\">Nurse</option>\n                  <option value=\"phamarcist\">Phamarcist</option>\n                  <option value=\"accountant\">Accountant</option>\n                </select>\n              </div>\n              <div>\n                <label>Speciality</label>\n                <select\n                  className=\"form-control\"\n                  value={this.state.speciality}\n                  onChange={this.onSpecialityChange}\n                  name=\"speciality\"\n                >\n                  <option value=\"\">Select</option>\n                  <option value=\"ent\">ENT</option>\n                  <option value=\"gynea\">Gynea</option>\n                  <option value=\"emergency\">Emergency</option>\n                  <option value=\"recordKeeping\">Record Keeping</option>\n                  <option value=\"accounting\">Accounting</option>\n                </select>\n              </div>\n              <div>\n                <label>Modules Visible to the User:</label>\n                <div className=\"checkboxes-stack\">\n                  <div>\n                    <input\n                      type=\"checkbox\"\n                      name=\"records\"\n                      value={this.state.records}\n                      name=\"records\"\n                      onChange={this.onRecordsCheckBoxChange}\n                    />{\" \"}\n                    Records Module\n                  </div>\n                  <div>\n                    <input\n                      type=\"checkbox\"\n                      name=\"doctors\"\n                      value={this.state.doctors}\n                      name=\"doctors\"\n                      onChange={this.onDoctorsCheckBoxChange}\n                    />{\" \"}\n                    Doctors Module\n                  </div>\n                  <div>\n                    <input\n                      type=\"checkbox\"\n                      name=\"pharmacy\"\n                      value={this.state.pharmacy}\n                      name=\"pharmacy\"\n                      onChange={this.onpharmacyCheckBoxChange}\n                    />{\" \"}\n                    Pharmacy Module\n                  </div>\n                  <div>\n                    <input\n                      type=\"checkbox\"\n                      name=\"admin\"\n                      value={this.state.admin}\n                      name=\"admin\"\n                      onChange={this.onAdminCheckBoxChange}\n                    />{\" \"}\n                    Admin Module\n                  </div>\n                </div>\n              </div>\n              <span style={{ color: \"red\" }}>{this.state.msg}</span>\n              <input\n                type=\"submit\"\n                onClick={this.handleSubmit}\n                value=\"Sumit\"\n                className=\"btn btn-outline-secondary\"\n              />\n            </CardBody>\n          </Card>\n        </form>\n      </div>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}