{"ast":null,"code":"import _defineProperty from \"/root/Desktop/bits-his/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/root/Desktop/bits-his/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/root/Desktop/bits-his/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/root/Desktop/bits-his/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/root/Desktop/bits-his/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/root/Desktop/bits-his/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/root/Desktop/bits-his/src/components/AdminModule/CreateUserForm.js\";\nimport React, { Component } from 'react';\nimport { Card, CardBody, CardHeader } from 'reactstrap';\nimport { _fetchData, _postData } from '../helpers.js';\n\nvar CreateUserForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CreateUserForm, _Component);\n\n  function CreateUserForm(props) {\n    var _this;\n\n    _classCallCheck(this, CreateUserForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CreateUserForm).call(this, props));\n\n    _this.fetchUsers = function () {\n      var cb = function cb(data) {\n        return _this.setState({\n          users: data\n        });\n      };\n\n      _fetchData({\n        route: 'users/usersList',\n        callback: cb\n      });\n    };\n\n    _this.logChange = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.onRecordsCheckBoxChange = function () {\n      _this.setState(function (prevState) {\n        return {\n          records: prevState.records === 0 ? 1 : 0\n        };\n      });\n    };\n\n    _this.onDoctorsCheckBoxChange = function () {\n      _this.setState(function (prevState) {\n        return {\n          doctors: prevState.doctors === 0 ? 1 : 0\n        };\n      });\n    };\n\n    _this.onpharmacyCheckBoxChange = function () {\n      _this.setState(function (prevState) {\n        return {\n          pharmacy: prevState.pharmacy === 0 ? 1 : 0\n        };\n      });\n    };\n\n    _this.onAdminCheckBoxChange = function () {\n      _this.setState(function (prevState) {\n        return {\n          admin: prevState.admin === 0 ? 1 : 0\n        };\n      });\n    };\n\n    _this.onRoleChange = function (e) {\n      _this.setState({\n        role: e.target.value\n      });\n    };\n\n    _this.onSpecialityChange = function (e) {\n      _this.setState({\n        speciality: e.target.value\n      });\n    };\n\n    _this.submit = function (data) {\n      // postData({ route: 'users/new', data });\n      fetch('http://localhost:4000/users/new', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(data)\n      }).then(function (response) {\n        if (response.status >= 400) {\n          throw new Error(\"Bad response from server\");\n        }\n\n        return response.json();\n      }).then(function (data) {\n        console.log(data);\n\n        if (data === \"success\") {\n          this.setState({\n            msg: \"Thanks for registering\"\n          });\n        }\n      }).catch(function (err) {\n        return err;\n      });\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault();\n      var username = _this.state.username;\n      var users = _this.state.users;\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = users[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var user = _step.value;\n\n          if (user.username === username) {\n            return _this.setState({\n              msg: 'Username taken! please choose another username'\n            });\n          } else {\n            var data = {\n              name: _this.state.name,\n              username: username,\n              password: _this.state.password,\n              role: _this.state.role,\n              speciality: _this.state.speciality,\n              records: _this.state.records,\n              doctors: _this.state.doctors,\n              pharmacy: _this.state.pharmacy,\n              admin: _this.state.admin\n            };\n\n            _this.submit(data);\n\n            _this.setState({\n              name: '',\n              username: '',\n              password: '',\n              role: '',\n              speciality: '',\n              records: 0,\n              doctors: 0,\n              pharmacy: 0,\n              admin: 0,\n              msg: ''\n            });\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    };\n\n    _this.state = {\n      users: [],\n      name: '',\n      username: '',\n      password: '',\n      role: '',\n      speciality: '',\n      records: 0,\n      doctors: 0,\n      pharmacy: 0,\n      admin: 0,\n      msg: ''\n    };\n    return _this;\n  }\n\n  _createClass(CreateUserForm, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchUsers();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _React$createElement, _React$createElement2, _React$createElement3, _React$createElement4;\n\n      var formStyle = {\n        width: '40%',\n        marginLeft: 20\n      };\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        style: formStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      }, \"Create a new User\")), React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }, \"Full Name:\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: this.state.name,\n        onChange: this.logChange,\n        name: \"name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, \"Username:\"), React.createElement(\"input\", {\n        type: \"text\",\n        className: \"form-control\",\n        value: this.state.username,\n        onChange: this.logChange,\n        name: \"username\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"Password:\"), React.createElement(\"input\", {\n        type: \"password\",\n        className: \"form-control\",\n        value: this.state.password,\n        onChange: this.logChange,\n        name: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"Role:\"), React.createElement(\"select\", {\n        className: \"form-control\",\n        value: this.state.role,\n        onChange: this.onRoleChange,\n        name: \"role\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      }, \"Select\"), React.createElement(\"option\", {\n        value: \"doctor\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, \"Doctor\"), React.createElement(\"option\", {\n        value: \"nurse\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, \"Nurse\"), React.createElement(\"option\", {\n        value: \"phamarcist\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, \"Phamarcist\"), React.createElement(\"option\", {\n        value: \"accountant\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"Accountant\"))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"Speciality\"), React.createElement(\"select\", {\n        className: \"form-control\",\n        value: this.state.speciality,\n        onChange: this.onSpecialityChange,\n        name: \"speciality\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159\n        },\n        __self: this\n      }, \"Select\"), React.createElement(\"option\", {\n        value: \"ent\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, \"ENT\"), React.createElement(\"option\", {\n        value: \"gynea\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, \"Gynea\"), React.createElement(\"option\", {\n        value: \"emergency\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162\n        },\n        __self: this\n      }, \"Emergency\"), React.createElement(\"option\", {\n        value: \"recordKeeping\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, \"Record Keeping\"), React.createElement(\"option\", {\n        value: \"accounting\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, \"Accounting\"))), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, \"Modules Visible to the User:\"), React.createElement(\"div\", {\n        className: \"checkboxes-stack\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170\n        },\n        __self: this\n      }, React.createElement(\"input\", (_React$createElement = {\n        type: \"checkbox\",\n        name: \"records\",\n        value: this.state.records\n      }, _defineProperty(_React$createElement, \"name\", \"records\"), _defineProperty(_React$createElement, \"onChange\", this.onRecordsCheckBoxChange), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 170\n      }), _defineProperty(_React$createElement, \"__self\", this), _React$createElement)), \" Records Module\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171\n        },\n        __self: this\n      }, React.createElement(\"input\", (_React$createElement2 = {\n        type: \"checkbox\",\n        name: \"doctors\",\n        value: this.state.doctors\n      }, _defineProperty(_React$createElement2, \"name\", \"doctors\"), _defineProperty(_React$createElement2, \"onChange\", this.onDoctorsCheckBoxChange), _defineProperty(_React$createElement2, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 171\n      }), _defineProperty(_React$createElement2, \"__self\", this), _React$createElement2)), \" Doctors Module\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(\"input\", (_React$createElement3 = {\n        type: \"checkbox\",\n        name: \"pharmacy\",\n        value: this.state.pharmacy\n      }, _defineProperty(_React$createElement3, \"name\", \"pharmacy\"), _defineProperty(_React$createElement3, \"onChange\", this.onpharmacyCheckBoxChange), _defineProperty(_React$createElement3, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      }), _defineProperty(_React$createElement3, \"__self\", this), _React$createElement3)), \" Pharmacy Module\"), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(\"input\", (_React$createElement4 = {\n        type: \"checkbox\",\n        name: \"admin\",\n        value: this.state.admin\n      }, _defineProperty(_React$createElement4, \"name\", \"admin\"), _defineProperty(_React$createElement4, \"onChange\", this.onAdminCheckBoxChange), _defineProperty(_React$createElement4, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      }), _defineProperty(_React$createElement4, \"__self\", this), _React$createElement4)), \" Admin Module\"))), React.createElement(\"span\", {\n        style: {\n          color: 'red'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, this.state.msg), React.createElement(\"input\", {\n        type: \"submit\",\n        onClick: this.handleSubmit,\n        value: \"Sumit\",\n        className: \"btn btn-outline-secondary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return CreateUserForm;\n}(Component);\n\nexport { CreateUserForm as default };","map":{"version":3,"sources":["/root/Desktop/bits-his/src/components/AdminModule/CreateUserForm.js"],"names":["React","Component","Card","CardBody","CardHeader","_fetchData","_postData","CreateUserForm","props","fetchUsers","cb","data","setState","users","route","callback","logChange","e","target","name","value","onRecordsCheckBoxChange","prevState","records","onDoctorsCheckBoxChange","doctors","onpharmacyCheckBoxChange","pharmacy","onAdminCheckBoxChange","admin","onRoleChange","role","onSpecialityChange","speciality","submit","fetch","method","headers","body","JSON","stringify","then","response","status","Error","json","console","log","msg","catch","err","handleSubmit","preventDefault","username","state","user","password","formStyle","width","marginLeft","color"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { Card, CardBody, CardHeader } from 'reactstrap';\nimport { _fetchData, _postData } from '../helpers.js';\n\nexport default class CreateUserForm extends Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            users: [],\n            name: '',\n            username: '',\n            password: '',\n            role: '',\n            speciality: '',\n            records: 0,\n            doctors: 0,\n            pharmacy: 0,\n            admin: 0,\n            msg: '',\n        }\n    }\n\n    componentDidMount(){\n        this.fetchUsers();\n    }\n\n    fetchUsers = () => {\n        const cb = (data) => this.setState({ users: data })\n        _fetchData({ route: 'users/usersList', callback: cb })\n    }\n\n    logChange = (e) => {\n        this.setState({[e.target.name]: e.target.value});  \n    }\n\n    onRecordsCheckBoxChange = () => {\n        this.setState((prevState) => { return { records: prevState.records === 0 ? 1 : 0 } });\n    }\n\n    onDoctorsCheckBoxChange = () => {\n        this.setState((prevState) => { return { doctors: prevState.doctors === 0 ? 1 : 0 } });\n    }\n\n    onpharmacyCheckBoxChange = () => {\n        this.setState((prevState) => { return { pharmacy: prevState.pharmacy === 0 ? 1 : 0 } });\n    }\n\n    onAdminCheckBoxChange = () => {\n        this.setState((prevState) => { return { admin: prevState.admin === 0 ? 1 : 0 } });\n    }\n\n    onRoleChange = (e) => {\n        this.setState({ role: e.target.value })\n    }\n\n    onSpecialityChange = (e) => {\n        this.setState({ speciality: e.target.value })\n    }\n\n    submit = (data) => {\n        // postData({ route: 'users/new', data });\n\n        fetch('http://localhost:4000/users/new', {\n        method: 'POST',\n        headers: {'Content-Type': 'application/json'},\n        body: JSON.stringify(data)}).then(function(response) {\n            if (response.status >= 400) {\n                throw new Error(\"Bad response from server\");\n            }\n            return response.json();\n        }).then(function(data) {\n            console.log(data)    \n            if(data === \"success\"){\n                this.setState({msg: \"Thanks for registering\"}); \n            }\n        }).catch(function(err) {\n            return err;\n        });\n    }\n\n    handleSubmit = (e) => {\n        e.preventDefault()\n        const username = this.state.username;\n        const users = this.state.users;\n        \n        for(let user of users){\n            if(user.username === username){\n                return this.setState({ msg: 'Username taken! please choose another username' });\n            } else {\n                const data = {\n                    name: this.state.name,\n                    username,\n                    password: this.state.password,\n                    role: this.state.role,\n                    speciality: this.state.speciality,\n                    records: this.state.records,\n                    doctors: this.state.doctors,\n                    pharmacy: this.state.pharmacy,\n                    admin: this.state.admin\n                }\n                this.submit(data)\n                this.setState({\n                    name: '',\n                    username: '',\n                    password: '',\n                    role: '',\n                    speciality: '',\n                    records: 0,\n                    doctors: 0,\n                    pharmacy: 0,\n                    admin: 0,\n                    msg: '',\n                });\n            }\n        }\n        \n    }\n\n\n  render() {\n      const formStyle={\n          width: '40%',\n          marginLeft: 20\n      }\n    return (\n      <div>\n          \n        <form style={formStyle}>\n            <Card>\n                <CardHeader>\n                    <h4>Create a new User</h4>\n                </CardHeader>\n                <CardBody>\n                    <div>\n                        <label>Full Name:</label>\n                        <input type=\"text\" className=\"form-control\" value={this.state.name} onChange={this.logChange} name='name'/>\n                    </div>\n                    <div>\n                        <label>Username:</label>\n                        <input type=\"text\" className=\"form-control\" value={this.state.username} onChange={this.logChange} name='username'/>\n                    </div>\n                    <div>\n                        <label>Password:</label>\n                        <input type=\"password\" className=\"form-control\" value={this.state.password} onChange={this.logChange} name='password' />\n                    </div>\n                    <div>\n                        <label>Role:</label>\n                        <select className=\"form-control\" value={this.state.role} onChange={this.onRoleChange} name=\"role\">\n                            <option value=\"\">Select</option>\n                            <option value=\"doctor\">Doctor</option>\n                            <option value=\"nurse\">Nurse</option>\n                            <option value=\"phamarcist\">Phamarcist</option>\n                            <option value=\"accountant\">Accountant</option>\n                        </select>\n                    </div>\n                    <div>\n                        <label>Speciality</label>\n                        <select className=\"form-control\" value={this.state.speciality} onChange={this.onSpecialityChange} name=\"speciality\">\n                            <option value=\"\">Select</option>\n                            <option value=\"ent\">ENT</option>\n                            <option value=\"gynea\">Gynea</option>\n                            <option value=\"emergency\">Emergency</option>\n                            <option value=\"recordKeeping\">Record Keeping</option>\n                            <option value=\"accounting\">Accounting</option>\n                        </select>\n                    </div>\n                    <div> \n                        <label>Modules Visible to the User:</label>\n                        <div className='checkboxes-stack'>\n                            <div><input type=\"checkbox\" name=\"records\" value={this.state.records} name='records' onChange={this.onRecordsCheckBoxChange} /> Records Module</div>\n                            <div><input type=\"checkbox\" name=\"doctors\" value={this.state.doctors} name='doctors' onChange={this.onDoctorsCheckBoxChange} /> Doctors Module</div>\n                            <div><input type=\"checkbox\" name=\"pharmacy\" value={this.state.pharmacy} name='pharmacy' onChange={this.onpharmacyCheckBoxChange} /> Pharmacy Module</div>\n                            <div><input type=\"checkbox\" name=\"admin\" value={this.state.admin} name='admin' onChange={this.onAdminCheckBoxChange} /> Admin Module</div>\n                        </div>\n                    </div>\n                    <span style={{color:'red'}}>{this.state.msg}</span>\n                    <input type=\"submit\" onClick={this.handleSubmit} value=\"Sumit\" className=\"btn btn-outline-secondary\"/>\n                </CardBody>\n            </Card>\n        </form>\n        \n      </div>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}