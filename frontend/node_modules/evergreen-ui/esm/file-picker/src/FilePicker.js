import _extends from "@babel/runtime/helpers/esm/extends";
import _objectWithoutProperties from "@babel/runtime/helpers/esm/objectWithoutProperties";
import _toConsumableArray from "@babel/runtime/helpers/esm/toConsumableArray";
import _classCallCheck from "@babel/runtime/helpers/esm/classCallCheck";
import _createClass from "@babel/runtime/helpers/esm/createClass";
import _possibleConstructorReturn from "@babel/runtime/helpers/esm/possibleConstructorReturn";
import _getPrototypeOf from "@babel/runtime/helpers/esm/getPrototypeOf";
import _inherits from "@babel/runtime/helpers/esm/inherits";
import _assertThisInitialized from "@babel/runtime/helpers/esm/assertThisInitialized";
import _defineProperty from "@babel/runtime/helpers/esm/defineProperty";
import React, { PureComponent } from 'react';
import PropTypes from 'prop-types';
import Box from 'ui-box';
import { Button } from '../../buttons';
import { TextInput } from '../../text-input';
export var CLASS_PREFIX = 'evergreen-file-picker';

var FilePicker =
/*#__PURE__*/
function (_PureComponent) {
  _inherits(FilePicker, _PureComponent);

  function FilePicker() {
    var _this;

    _classCallCheck(this, FilePicker);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(FilePicker).call(this));

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "fileInputRef", function (node) {
      _this.fileInput = node;
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "handleFileChange", function (e) {
      var onChange = _this.props.onChange; // Firefox returns the same array instance each time for some reason

      var files = _toConsumableArray(e.target.files);

      _this.setState({
        files: files
      });

      if (onChange) {
        onChange(files);
      }
    });

    _defineProperty(_assertThisInitialized(_assertThisInitialized(_this)), "handleButtonClick", function () {
      _this.fileInput.click();
    });

    _this.state = {
      files: []
    };
    return _this;
  }

  _createClass(FilePicker, [{
    key: "render",
    value: function render() {
      var _this$props = this.props,
          name = _this$props.name,
          accept = _this$props.accept,
          required = _this$props.required,
          multiple = _this$props.multiple,
          disabled = _this$props.disabled,
          capture = _this$props.capture,
          height = _this$props.height,
          onChange = _this$props.onChange,
          props = _objectWithoutProperties(_this$props, ["name", "accept", "required", "multiple", "disabled", "capture", "height", "onChange"]);

      var files = this.state.files;
      var inputValue;

      if (files.length === 0) {
        inputValue = '';
      } else if (files.length === 1) {
        inputValue = files[0].name;
      } else {
        inputValue = "".concat(files.length, " files");
      }

      var buttonText;

      if (files.length === 0) {
        buttonText = 'Select file';
      } else if (files.length === 1) {
        buttonText = 'Replace file';
      } else {
        buttonText = 'Replace files';
      }

      return React.createElement(Box, _extends({
        display: "flex",
        className: "".concat(CLASS_PREFIX, "-root")
      }, props), React.createElement(Box, {
        innerRef: this.fileInputRef,
        className: "".concat(CLASS_PREFIX, "-file-input"),
        is: "input",
        type: "file",
        name: name,
        accept: accept,
        required: required,
        multiple: multiple,
        disabled: disabled,
        capture: capture,
        onChange: this.handleFileChange,
        display: "none"
      }), React.createElement(TextInput, {
        className: "".concat(CLASS_PREFIX, "-text-input"),
        readOnly: true,
        value: inputValue,
        placeholder: "Select a file to upload\u2026" // There's a weird specifity issue when there's two differently sized inputs on the page
        ,
        borderTopRightRadius: "0 !important",
        borderBottomRightRadius: "0 !important",
        height: height,
        flex: 1,
        textOverflow: "ellipsis"
      }), React.createElement(Button, {
        className: "".concat(CLASS_PREFIX, "-button"),
        onClick: this.handleButtonClick,
        disabled: disabled,
        borderTopLeftRadius: 0,
        borderBottomLeftRadius: 0,
        height: height,
        flexShrink: 0
      }, buttonText));
    }
  }]);

  return FilePicker;
}(PureComponent);

FilePicker.displayName = "FilePicker";

_defineProperty(FilePicker, "propTypes", {
  /**
   * Name attribute of the input.
   */
  name: PropTypes.string,

  /**
   * The accept attribute of the input.
   */
  accept: PropTypes.oneOfType([PropTypes.string, PropTypes.arrayOf(PropTypes.string)]),

  /**
   * When true, the file picker is required.
   */
  required: PropTypes.bool,

  /**
   * When true, accept multiple files.
   */
  multiple: PropTypes.bool,

  /**
   * When true, the filepicker is disabled.
   */
  disabled: PropTypes.bool,

  /**
   * The capture attribute of the input.
   */
  capture: PropTypes.bool,

  /**
   * The height of the file picker.
   */
  height: PropTypes.number,

  /**
   * Function called when onChange is fired
   */
  onChange: PropTypes.func
});

export { FilePicker as default };
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9maWxlLXBpY2tlci9zcmMvRmlsZVBpY2tlci5qcyJdLCJuYW1lcyI6WyJSZWFjdCIsIlB1cmVDb21wb25lbnQiLCJQcm9wVHlwZXMiLCJCb3giLCJCdXR0b24iLCJUZXh0SW5wdXQiLCJDTEFTU19QUkVGSVgiLCJGaWxlUGlja2VyIiwibm9kZSIsImZpbGVJbnB1dCIsImUiLCJvbkNoYW5nZSIsInByb3BzIiwiZmlsZXMiLCJ0YXJnZXQiLCJzZXRTdGF0ZSIsImNsaWNrIiwic3RhdGUiLCJuYW1lIiwiYWNjZXB0IiwicmVxdWlyZWQiLCJtdWx0aXBsZSIsImRpc2FibGVkIiwiY2FwdHVyZSIsImhlaWdodCIsImlucHV0VmFsdWUiLCJsZW5ndGgiLCJidXR0b25UZXh0IiwiZmlsZUlucHV0UmVmIiwiaGFuZGxlRmlsZUNoYW5nZSIsImhhbmRsZUJ1dHRvbkNsaWNrIiwic3RyaW5nIiwib25lT2ZUeXBlIiwiYXJyYXlPZiIsImJvb2wiLCJudW1iZXIiLCJmdW5jIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsT0FBT0EsS0FBUCxJQUFnQkMsYUFBaEIsUUFBcUMsT0FBckM7QUFDQSxPQUFPQyxTQUFQLE1BQXNCLFlBQXRCO0FBQ0EsT0FBT0MsR0FBUCxNQUFnQixRQUFoQjtBQUNBLFNBQVNDLE1BQVQsUUFBdUIsZUFBdkI7QUFDQSxTQUFTQyxTQUFULFFBQTBCLGtCQUExQjtBQUVBLE9BQU8sSUFBTUMsWUFBWSxHQUFHLHVCQUFyQjs7SUFFY0MsVTs7Ozs7QUE4Q25CLHdCQUFjO0FBQUE7O0FBQUE7O0FBQ1o7O0FBRFksMkZBcUZDLFVBQUFDLElBQUksRUFBSTtBQUNyQixZQUFLQyxTQUFMLEdBQWlCRCxJQUFqQjtBQUNELEtBdkZhOztBQUFBLCtGQXlGSyxVQUFBRSxDQUFDLEVBQUk7QUFBQSxVQUNkQyxRQURjLEdBQ0QsTUFBS0MsS0FESixDQUNkRCxRQURjLEVBRXRCOztBQUNBLFVBQU1FLEtBQUssc0JBQU9ILENBQUMsQ0FBQ0ksTUFBRixDQUFTRCxLQUFoQixDQUFYOztBQUVBLFlBQUtFLFFBQUwsQ0FBYztBQUFFRixRQUFBQSxLQUFLLEVBQUxBO0FBQUYsT0FBZDs7QUFFQSxVQUFJRixRQUFKLEVBQWM7QUFDWkEsUUFBQUEsUUFBUSxDQUFDRSxLQUFELENBQVI7QUFDRDtBQUNGLEtBbkdhOztBQUFBLGdHQXFHTSxZQUFNO0FBQ3hCLFlBQUtKLFNBQUwsQ0FBZU8sS0FBZjtBQUNELEtBdkdhOztBQUdaLFVBQUtDLEtBQUwsR0FBYTtBQUNYSixNQUFBQSxLQUFLLEVBQUU7QUFESSxLQUFiO0FBSFk7QUFNYjs7Ozs2QkFFUTtBQUFBLHdCQVdILEtBQUtELEtBWEY7QUFBQSxVQUVMTSxJQUZLLGVBRUxBLElBRks7QUFBQSxVQUdMQyxNQUhLLGVBR0xBLE1BSEs7QUFBQSxVQUlMQyxRQUpLLGVBSUxBLFFBSks7QUFBQSxVQUtMQyxRQUxLLGVBS0xBLFFBTEs7QUFBQSxVQU1MQyxRQU5LLGVBTUxBLFFBTks7QUFBQSxVQU9MQyxPQVBLLGVBT0xBLE9BUEs7QUFBQSxVQVFMQyxNQVJLLGVBUUxBLE1BUks7QUFBQSxVQVNMYixRQVRLLGVBU0xBLFFBVEs7QUFBQSxVQVVGQyxLQVZFOztBQUFBLFVBWUNDLEtBWkQsR0FZVyxLQUFLSSxLQVpoQixDQVlDSixLQVpEO0FBY1AsVUFBSVksVUFBSjs7QUFDQSxVQUFJWixLQUFLLENBQUNhLE1BQU4sS0FBaUIsQ0FBckIsRUFBd0I7QUFDdEJELFFBQUFBLFVBQVUsR0FBRyxFQUFiO0FBQ0QsT0FGRCxNQUVPLElBQUlaLEtBQUssQ0FBQ2EsTUFBTixLQUFpQixDQUFyQixFQUF3QjtBQUM3QkQsUUFBQUEsVUFBVSxHQUFHWixLQUFLLENBQUMsQ0FBRCxDQUFMLENBQVNLLElBQXRCO0FBQ0QsT0FGTSxNQUVBO0FBQ0xPLFFBQUFBLFVBQVUsYUFBTVosS0FBSyxDQUFDYSxNQUFaLFdBQVY7QUFDRDs7QUFFRCxVQUFJQyxVQUFKOztBQUNBLFVBQUlkLEtBQUssQ0FBQ2EsTUFBTixLQUFpQixDQUFyQixFQUF3QjtBQUN0QkMsUUFBQUEsVUFBVSxHQUFHLGFBQWI7QUFDRCxPQUZELE1BRU8sSUFBSWQsS0FBSyxDQUFDYSxNQUFOLEtBQWlCLENBQXJCLEVBQXdCO0FBQzdCQyxRQUFBQSxVQUFVLEdBQUcsY0FBYjtBQUNELE9BRk0sTUFFQTtBQUNMQSxRQUFBQSxVQUFVLEdBQUcsZUFBYjtBQUNEOztBQUVELGFBQ0Usb0JBQUMsR0FBRDtBQUFLLFFBQUEsT0FBTyxFQUFDLE1BQWI7QUFBb0IsUUFBQSxTQUFTLFlBQUtyQixZQUFMO0FBQTdCLFNBQTJETSxLQUEzRCxHQUNFLG9CQUFDLEdBQUQ7QUFDRSxRQUFBLFFBQVEsRUFBRSxLQUFLZ0IsWUFEakI7QUFFRSxRQUFBLFNBQVMsWUFBS3RCLFlBQUwsZ0JBRlg7QUFHRSxRQUFBLEVBQUUsRUFBQyxPQUhMO0FBSUUsUUFBQSxJQUFJLEVBQUMsTUFKUDtBQUtFLFFBQUEsSUFBSSxFQUFFWSxJQUxSO0FBTUUsUUFBQSxNQUFNLEVBQUVDLE1BTlY7QUFPRSxRQUFBLFFBQVEsRUFBRUMsUUFQWjtBQVFFLFFBQUEsUUFBUSxFQUFFQyxRQVJaO0FBU0UsUUFBQSxRQUFRLEVBQUVDLFFBVFo7QUFVRSxRQUFBLE9BQU8sRUFBRUMsT0FWWDtBQVdFLFFBQUEsUUFBUSxFQUFFLEtBQUtNLGdCQVhqQjtBQVlFLFFBQUEsT0FBTyxFQUFDO0FBWlYsUUFERixFQWdCRSxvQkFBQyxTQUFEO0FBQ0UsUUFBQSxTQUFTLFlBQUt2QixZQUFMLGdCQURYO0FBRUUsUUFBQSxRQUFRLE1BRlY7QUFHRSxRQUFBLEtBQUssRUFBRW1CLFVBSFQ7QUFJRSxRQUFBLFdBQVcsRUFBQywrQkFKZCxDQUtFO0FBTEY7QUFNRSxRQUFBLG9CQUFvQixFQUFDLGNBTnZCO0FBT0UsUUFBQSx1QkFBdUIsRUFBQyxjQVAxQjtBQVFFLFFBQUEsTUFBTSxFQUFFRCxNQVJWO0FBU0UsUUFBQSxJQUFJLEVBQUUsQ0FUUjtBQVVFLFFBQUEsWUFBWSxFQUFDO0FBVmYsUUFoQkYsRUE2QkUsb0JBQUMsTUFBRDtBQUNFLFFBQUEsU0FBUyxZQUFLbEIsWUFBTCxZQURYO0FBRUUsUUFBQSxPQUFPLEVBQUUsS0FBS3dCLGlCQUZoQjtBQUdFLFFBQUEsUUFBUSxFQUFFUixRQUhaO0FBSUUsUUFBQSxtQkFBbUIsRUFBRSxDQUp2QjtBQUtFLFFBQUEsc0JBQXNCLEVBQUUsQ0FMMUI7QUFNRSxRQUFBLE1BQU0sRUFBRUUsTUFOVjtBQU9FLFFBQUEsVUFBVSxFQUFFO0FBUGQsU0FTR0csVUFUSCxDQTdCRixDQURGO0FBMkNEOzs7O0VBaklxQzFCLGE7O0FBQW5CTSxVOztnQkFBQUEsVSxlQUNBO0FBQ2pCOzs7QUFHQVcsRUFBQUEsSUFBSSxFQUFFaEIsU0FBUyxDQUFDNkIsTUFKQzs7QUFNakI7OztBQUdBWixFQUFBQSxNQUFNLEVBQUVqQixTQUFTLENBQUM4QixTQUFWLENBQW9CLENBQzFCOUIsU0FBUyxDQUFDNkIsTUFEZ0IsRUFFMUI3QixTQUFTLENBQUMrQixPQUFWLENBQWtCL0IsU0FBUyxDQUFDNkIsTUFBNUIsQ0FGMEIsQ0FBcEIsQ0FUUzs7QUFjakI7OztBQUdBWCxFQUFBQSxRQUFRLEVBQUVsQixTQUFTLENBQUNnQyxJQWpCSDs7QUFtQmpCOzs7QUFHQWIsRUFBQUEsUUFBUSxFQUFFbkIsU0FBUyxDQUFDZ0MsSUF0Qkg7O0FBd0JqQjs7O0FBR0FaLEVBQUFBLFFBQVEsRUFBRXBCLFNBQVMsQ0FBQ2dDLElBM0JIOztBQTZCakI7OztBQUdBWCxFQUFBQSxPQUFPLEVBQUVyQixTQUFTLENBQUNnQyxJQWhDRjs7QUFrQ2pCOzs7QUFHQVYsRUFBQUEsTUFBTSxFQUFFdEIsU0FBUyxDQUFDaUMsTUFyQ0Q7O0FBdUNqQjs7O0FBR0F4QixFQUFBQSxRQUFRLEVBQUVULFNBQVMsQ0FBQ2tDO0FBMUNILEM7O1NBREE3QixVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IFB1cmVDb21wb25lbnQgfSBmcm9tICdyZWFjdCdcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcydcbmltcG9ydCBCb3ggZnJvbSAndWktYm94J1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSAnLi4vLi4vYnV0dG9ucydcbmltcG9ydCB7IFRleHRJbnB1dCB9IGZyb20gJy4uLy4uL3RleHQtaW5wdXQnXG5cbmV4cG9ydCBjb25zdCBDTEFTU19QUkVGSVggPSAnZXZlcmdyZWVuLWZpbGUtcGlja2VyJ1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBGaWxlUGlja2VyIGV4dGVuZHMgUHVyZUNvbXBvbmVudCB7XG4gIHN0YXRpYyBwcm9wVHlwZXMgPSB7XG4gICAgLyoqXG4gICAgICogTmFtZSBhdHRyaWJ1dGUgb2YgdGhlIGlucHV0LlxuICAgICAqL1xuICAgIG5hbWU6IFByb3BUeXBlcy5zdHJpbmcsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgYWNjZXB0IGF0dHJpYnV0ZSBvZiB0aGUgaW5wdXQuXG4gICAgICovXG4gICAgYWNjZXB0OiBQcm9wVHlwZXMub25lT2ZUeXBlKFtcbiAgICAgIFByb3BUeXBlcy5zdHJpbmcsXG4gICAgICBQcm9wVHlwZXMuYXJyYXlPZihQcm9wVHlwZXMuc3RyaW5nKVxuICAgIF0pLFxuXG4gICAgLyoqXG4gICAgICogV2hlbiB0cnVlLCB0aGUgZmlsZSBwaWNrZXIgaXMgcmVxdWlyZWQuXG4gICAgICovXG4gICAgcmVxdWlyZWQ6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgLyoqXG4gICAgICogV2hlbiB0cnVlLCBhY2NlcHQgbXVsdGlwbGUgZmlsZXMuXG4gICAgICovXG4gICAgbXVsdGlwbGU6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgLyoqXG4gICAgICogV2hlbiB0cnVlLCB0aGUgZmlsZXBpY2tlciBpcyBkaXNhYmxlZC5cbiAgICAgKi9cbiAgICBkaXNhYmxlZDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgICAvKipcbiAgICAgKiBUaGUgY2FwdHVyZSBhdHRyaWJ1dGUgb2YgdGhlIGlucHV0LlxuICAgICAqL1xuICAgIGNhcHR1cmU6IFByb3BUeXBlcy5ib29sLFxuXG4gICAgLyoqXG4gICAgICogVGhlIGhlaWdodCBvZiB0aGUgZmlsZSBwaWNrZXIuXG4gICAgICovXG4gICAgaGVpZ2h0OiBQcm9wVHlwZXMubnVtYmVyLFxuXG4gICAgLyoqXG4gICAgICogRnVuY3Rpb24gY2FsbGVkIHdoZW4gb25DaGFuZ2UgaXMgZmlyZWRcbiAgICAgKi9cbiAgICBvbkNoYW5nZTogUHJvcFR5cGVzLmZ1bmNcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKClcblxuICAgIHRoaXMuc3RhdGUgPSB7XG4gICAgICBmaWxlczogW11cbiAgICB9XG4gIH1cblxuICByZW5kZXIoKSB7XG4gICAgY29uc3Qge1xuICAgICAgbmFtZSxcbiAgICAgIGFjY2VwdCxcbiAgICAgIHJlcXVpcmVkLFxuICAgICAgbXVsdGlwbGUsXG4gICAgICBkaXNhYmxlZCxcbiAgICAgIGNhcHR1cmUsXG4gICAgICBoZWlnaHQsXG4gICAgICBvbkNoYW5nZSwgLy8gUmVtb3ZlIG9uQ2hhbmdlIGZyb20gcHJvcHNcbiAgICAgIC4uLnByb3BzXG4gICAgfSA9IHRoaXMucHJvcHNcbiAgICBjb25zdCB7IGZpbGVzIH0gPSB0aGlzLnN0YXRlXG5cbiAgICBsZXQgaW5wdXRWYWx1ZVxuICAgIGlmIChmaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlucHV0VmFsdWUgPSAnJ1xuICAgIH0gZWxzZSBpZiAoZmlsZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICBpbnB1dFZhbHVlID0gZmlsZXNbMF0ubmFtZVxuICAgIH0gZWxzZSB7XG4gICAgICBpbnB1dFZhbHVlID0gYCR7ZmlsZXMubGVuZ3RofSBmaWxlc2BcbiAgICB9XG5cbiAgICBsZXQgYnV0dG9uVGV4dFxuICAgIGlmIChmaWxlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGJ1dHRvblRleHQgPSAnU2VsZWN0IGZpbGUnXG4gICAgfSBlbHNlIGlmIChmaWxlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgIGJ1dHRvblRleHQgPSAnUmVwbGFjZSBmaWxlJ1xuICAgIH0gZWxzZSB7XG4gICAgICBidXR0b25UZXh0ID0gJ1JlcGxhY2UgZmlsZXMnXG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIDxCb3ggZGlzcGxheT1cImZsZXhcIiBjbGFzc05hbWU9e2Ake0NMQVNTX1BSRUZJWH0tcm9vdGB9IHsuLi5wcm9wc30+XG4gICAgICAgIDxCb3hcbiAgICAgICAgICBpbm5lclJlZj17dGhpcy5maWxlSW5wdXRSZWZ9XG4gICAgICAgICAgY2xhc3NOYW1lPXtgJHtDTEFTU19QUkVGSVh9LWZpbGUtaW5wdXRgfVxuICAgICAgICAgIGlzPVwiaW5wdXRcIlxuICAgICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgICBuYW1lPXtuYW1lfVxuICAgICAgICAgIGFjY2VwdD17YWNjZXB0fVxuICAgICAgICAgIHJlcXVpcmVkPXtyZXF1aXJlZH1cbiAgICAgICAgICBtdWx0aXBsZT17bXVsdGlwbGV9XG4gICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgIGNhcHR1cmU9e2NhcHR1cmV9XG4gICAgICAgICAgb25DaGFuZ2U9e3RoaXMuaGFuZGxlRmlsZUNoYW5nZX1cbiAgICAgICAgICBkaXNwbGF5PVwibm9uZVwiXG4gICAgICAgIC8+XG5cbiAgICAgICAgPFRleHRJbnB1dFxuICAgICAgICAgIGNsYXNzTmFtZT17YCR7Q0xBU1NfUFJFRklYfS10ZXh0LWlucHV0YH1cbiAgICAgICAgICByZWFkT25seVxuICAgICAgICAgIHZhbHVlPXtpbnB1dFZhbHVlfVxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiU2VsZWN0IGEgZmlsZSB0byB1cGxvYWTigKZcIlxuICAgICAgICAgIC8vIFRoZXJlJ3MgYSB3ZWlyZCBzcGVjaWZpdHkgaXNzdWUgd2hlbiB0aGVyZSdzIHR3byBkaWZmZXJlbnRseSBzaXplZCBpbnB1dHMgb24gdGhlIHBhZ2VcbiAgICAgICAgICBib3JkZXJUb3BSaWdodFJhZGl1cz1cIjAgIWltcG9ydGFudFwiXG4gICAgICAgICAgYm9yZGVyQm90dG9tUmlnaHRSYWRpdXM9XCIwICFpbXBvcnRhbnRcIlxuICAgICAgICAgIGhlaWdodD17aGVpZ2h0fVxuICAgICAgICAgIGZsZXg9ezF9XG4gICAgICAgICAgdGV4dE92ZXJmbG93PVwiZWxsaXBzaXNcIlxuICAgICAgICAvPlxuXG4gICAgICAgIDxCdXR0b25cbiAgICAgICAgICBjbGFzc05hbWU9e2Ake0NMQVNTX1BSRUZJWH0tYnV0dG9uYH1cbiAgICAgICAgICBvbkNsaWNrPXt0aGlzLmhhbmRsZUJ1dHRvbkNsaWNrfVxuICAgICAgICAgIGRpc2FibGVkPXtkaXNhYmxlZH1cbiAgICAgICAgICBib3JkZXJUb3BMZWZ0UmFkaXVzPXswfVxuICAgICAgICAgIGJvcmRlckJvdHRvbUxlZnRSYWRpdXM9ezB9XG4gICAgICAgICAgaGVpZ2h0PXtoZWlnaHR9XG4gICAgICAgICAgZmxleFNocmluaz17MH1cbiAgICAgICAgPlxuICAgICAgICAgIHtidXR0b25UZXh0fVxuICAgICAgICA8L0J1dHRvbj5cbiAgICAgIDwvQm94PlxuICAgIClcbiAgfVxuXG4gIGZpbGVJbnB1dFJlZiA9IG5vZGUgPT4ge1xuICAgIHRoaXMuZmlsZUlucHV0ID0gbm9kZVxuICB9XG5cbiAgaGFuZGxlRmlsZUNoYW5nZSA9IGUgPT4ge1xuICAgIGNvbnN0IHsgb25DaGFuZ2UgfSA9IHRoaXMucHJvcHNcbiAgICAvLyBGaXJlZm94IHJldHVybnMgdGhlIHNhbWUgYXJyYXkgaW5zdGFuY2UgZWFjaCB0aW1lIGZvciBzb21lIHJlYXNvblxuICAgIGNvbnN0IGZpbGVzID0gWy4uLmUudGFyZ2V0LmZpbGVzXVxuXG4gICAgdGhpcy5zZXRTdGF0ZSh7IGZpbGVzIH0pXG5cbiAgICBpZiAob25DaGFuZ2UpIHtcbiAgICAgIG9uQ2hhbmdlKGZpbGVzKVxuICAgIH1cbiAgfVxuXG4gIGhhbmRsZUJ1dHRvbkNsaWNrID0gKCkgPT4ge1xuICAgIHRoaXMuZmlsZUlucHV0LmNsaWNrKClcbiAgfVxufVxuIl19